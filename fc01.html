<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Fortune Cookie</title>

<style>
:root{
  --night1:#030416;
  --night2:#060b2e;
  --night3:#02020a;

  --sky1:#8fd7ff;
  --sky2:#dff4ff;
  --sky3:#f7fdff;

  --text:#f5f7ff;
  --ink:#0b1220;

  --paper:#fffdf7;

  --cookieA:#f2d1a2;
  --cookieB:#d7a76b;
  --cookieC:#b87c3d;

  --shadow: rgba(0,0,0,.3);
}

/* RESET */
*{box-sizing:border-box}
html,body{margin:0;height:100%;font-family:system-ui,-apple-system,Segoe UI,Roboto}

/* ===== STAGE ===== */
body{
  display:grid;
  place-items:center;
  overflow:hidden;
  color:var(--text);
  background:
    radial-gradient(900px 650px at 25% 25%, rgba(120,110,255,.18), transparent 60%),
    radial-gradient(1100px 850px at 75% 80%, rgba(0,0,0,.55), transparent 60%),
    linear-gradient(180deg,var(--night2),var(--night1),var(--night3));
  transition:background 1s ease;
}

/* ===== NEBULA (LEONARDO HISSI) ===== */
.nebula{
  position:absolute;
  inset:-30%;
  pointer-events:none;
  background:
    radial-gradient(900px 700px at 20% 30%, rgba(130,110,255,.22), transparent 60%),
    radial-gradient(1000px 800px at 80% 40%, rgba(80,170,255,.16), transparent 62%),
    radial-gradient(1100px 900px at 50% 90%, rgba(0,0,0,.6), transparent 65%);
  filter: blur(1px) saturate(1.15);
  animation: floatNebula 12s ease-in-out infinite;
}
@keyframes floatNebula{
  0%,100%{transform:translate(0,0)}
  50%{transform:translate(12px,-10px)}
}

/* ===== GRAIN ===== */
.grain{
  position:absolute;
  inset:-20%;
  pointer-events:none;
  opacity:.08;
  background:
    repeating-linear-gradient(0deg,rgba(255,255,255,.12) 0 1px,transparent 2px 4px),
    repeating-linear-gradient(90deg,rgba(0,0,0,.1) 0 1px,transparent 2px 5px);
  mix-blend-mode:overlay;
}

/* ===== SUN RAYS (OPEN) ===== */
.sunrays{
  position:absolute;
  inset:-40%;
  pointer-events:none;
  opacity:0;
  transition:opacity .9s ease;
  background:
    conic-gradient(from 215deg at 30% 18%,
      rgba(255,255,255,0) 0deg,
      rgba(255,255,255,.22) 16deg,
      rgba(255,255,255,0) 34deg,
      rgba(255,255,255,.18) 54deg,
      rgba(255,255,255,0) 78deg,
      rgba(255,255,255,.14) 100deg,
      rgba(255,255,255,0) 150deg,
      rgba(255,255,255,.16) 180deg,
      rgba(255,255,255,0) 360deg);
}

/* ===== CENTER WRAP ===== */
.wrap{
  position:relative;
  z-index:2;
  display:grid;
  gap:14px;
  justify-items:center;
  width:min(700px,94vw);
  padding:20px;
  text-align:center;
}

.subtitle{
  font-size:13px;
  opacity:.8;
}

/* ===== COOKIE ===== */
.cookieBtn{
  background:none;
  border:0;
  cursor:pointer;
}

.cookieStage{
  width:min(340px,78vw);
  filter:drop-shadow(0 20px 30px var(--shadow));
}

svg{width:100%;height:auto}

/* ===== PAPER ===== */
.paper{
  background:linear-gradient(180deg,var(--paper),#fff);
  color:var(--ink);
  border-radius:18px;
  padding:18px 16px;
  width:min(520px,94vw);
  box-shadow:0 20px 34px rgba(0,0,0,.2);
  opacity:0;
  transform:translateY(12px) scale(.98);
  transition:.6s ease;
}

.fortune{
  margin:0;
  font-size:clamp(16px,2.6vw,20px);
  font-weight:700;
}

.hint{
  margin-top:8px;
  font-size:12px;
  opacity:.7;
}

/* ===== SOUND ===== */
.soundBtn{
  border:1px solid rgba(255,255,255,.25);
  background:rgba(255,255,255,.08);
  color:var(--text);
  padding:8px 14px;
  border-radius:999px;
  font-size:12px;
  cursor:pointer;
}

/* ===== OPEN STATE ===== */
body.opened{
  background:
    radial-gradient(900px 650px at 28% 18%, rgba(255,255,255,.78), transparent 56%),
    radial-gradient(1000px 800px at 70% 70%, rgba(255,255,255,.26), transparent 62%),
    linear-gradient(180deg,var(--sky1),var(--sky2),var(--sky3));
  color:var(--ink);
}
body.opened .nebula{opacity:.2}
body.opened .grain{opacity:.05}
body.opened .sunrays{opacity:1}
body.opened .paper{
  opacity:1;
  transform:none;
}
</style>
</head>

<body>
<div class="nebula"></div>
<div class="grain"></div>
<div class="sunrays"></div>

<main class="wrap">
  <div class="subtitle">Tap once. Receive one message.</div>

  <button class="cookieBtn" id="cookieBtn">
    <div class="cookieStage">
      <svg viewBox="0 0 520 360">
        <defs>
          <linearGradient id="cg" x1="0" x2="1">
            <stop offset="0" stop-color="var(--cookieA)"/>
            <stop offset=".55" stop-color="var(--cookieB)"/>
            <stop offset="1" stop-color="var(--cookieC)"/>
          </linearGradient>
        </defs>

        <!-- CLOSED -->
        <g id="closed">
          <path d="M90 210 C120 110,220 80,300 100 C250 150,210 220,195 290 C140 285,100 255,90 210 Z" fill="url(#cg)"/>
          <path d="M430 210 C400 110,300 80,220 100 C270 150,310 220,325 290 C380 285,420 255,430 210 Z" fill="url(#cg)"/>
        </g>

        <!-- OPEN -->
        <g id="open" opacity="0">
          <path d="M130 220 C140 140,220 120,280 135 C250 170,220 225,210 280 C170 280,140 255,130 220 Z" fill="url(#cg)" id="left"/>
          <path d="M390 220 C380 140,300 120,240 135 C270 170,300 225,310 280 C350 280,380 255,390 220 Z" fill="url(#cg)" id="right"/>
        </g>
      </svg>
    </div>
  </button>

  <button class="soundBtn" id="soundBtn">ðŸ”Š Sound: ON</button>

  <div class="paper" id="paper">
    <p class="fortune" id="fortuneText"></p>
    <div class="hint">Refresh wonâ€™t change this message.</div>
  </div>

  <audio id="audioCrack" src="cookie-crack.mp3"></audio>
  <audio id="audioPaper" src="paper-rustle.mp3"></audio>
</main>

<script>
const FORTUNE_TEXT = "Your lucky break is closer than you think";

const cookieBtn = document.getElementById("cookieBtn");
const fortuneText = document.getElementById("fortuneText");
const audioCrack = document.getElementById("audioCrack");
const audioPaper = document.getElementById("audioPaper");
const soundBtn = document.getElementById("soundBtn");

let opened=false, sound=true;
fortuneText.textContent = FORTUNE_TEXT;

soundBtn.onclick=()=>{
  sound=!sound;
  soundBtn.textContent=sound?"ðŸ”Š Sound: ON":"ðŸ”‡ Sound: OFF";
};

cookieBtn.onclick=()=>{
  if(opened) return;
  opened=true;
  document.body.classList.add("opened");
  if(sound){audioCrack.play(); setTimeout(()=>audioPaper.play(),420);}
};
</script>
</body>
</html>
