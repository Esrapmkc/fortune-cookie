<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Your Fortune Cookie</title>
  <style>
    *{margin:0;padding:0;box-sizing:border-box}

    body{
      font-family:'Georgia', serif;
      overflow:hidden;
      cursor:default;
      background:#0a0a1a;
    }

    .container{
      width:100%;
      height:100dvh;
      position:fixed;
      transition: background 1.5s ease;
      display:flex;
      align-items:center;
      justify-content:center;
    }

    /* ===== PREMIUM NIGHT BACKGROUND ===== */
    .night-sky{
      background:
        radial-gradient(900px 650px at 20% 25%, rgba(120,110,255,.18), transparent 60%),
        radial-gradient(800px 600px at 80% 35%, rgba(80,170,255,.12), transparent 62%),
        radial-gradient(1000px 800px at 55% 90%, rgba(0,0,0,.6), transparent 65%),
        linear-gradient(to bottom, #070718 0%, #0f1230 50%, #101a3a 100%);
    }

    /* ===== DAY BACKGROUND (soft + sun glow) ===== */
    .day-sky{
      background:
        radial-gradient(900px 650px at 25% 18%, rgba(255,255,220,.55), transparent 55%),
        radial-gradient(900px 650px at 70% 70%, rgba(255,255,255,.20), transparent 60%),
        linear-gradient(to bottom,
          #87CEEB 0%,
          #BDEBFF 35%,
          #E7F8FF 70%,
          #F7FDFF 100%);
    }

    /* ===== Stars ===== */
    .stars{
      position:absolute;
      width:100%;
      height:100%;
      pointer-events:none;
      transition:opacity 1.2s ease;
      opacity:.9;
    }
    .star{
      position:absolute;
      background:white;
      border-radius:50%;
      animation: twinkle 3s infinite ease-in-out;
      opacity:0;
      filter: blur(.2px);
    }
    @keyframes twinkle{
      0%,100%{opacity:.18;transform:scale(1)}
      50%{opacity:.65;transform:scale(1.15)}
    }

    /* ===== Sunlight layer ===== */
    .sunlight{
      position:absolute;
      width:100%;
      height:100%;
      opacity:0;
      pointer-events:none;
      transition: opacity 1.5s ease;
    }
    .sunlight.visible{opacity:1}

    .sun-ray{
      position:absolute;
      background: radial-gradient(circle, rgba(255,255,200,0.30) 0%, transparent 70%);
      border-radius:50%;
      animation: pulse 5s infinite ease-in-out;
      filter: blur(.2px);
    }
    @keyframes pulse{
      0%,100%{transform:scale(1);opacity:.25}
      50%{transform:scale(1.08);opacity:.55}
    }

    /* ===== Clouds ===== */
    .cloud{
      position:absolute;
      background: rgba(255,255,255,.55);
      border-radius:100px;
      opacity:0;
      transition: opacity 1.2s ease;
      animation: float 20s infinite ease-in-out;
      filter: blur(.2px);
    }
    .cloud::before,
    .cloud::after{
      content:'';
      position:absolute;
      background: rgba(255,255,255,.55);
      border-radius:100px;
    }
    .cloud::before{width:50px;height:50px;top:-25px;left:10px}
    .cloud::after{width:60px;height:60px;top:-30px;right:10px}
    @keyframes float{
      0%,100%{transform:translateX(0) translateY(0)}
      50%{transform:translateX(30px) translateY(-10px)}
    }

    /* ===== Cookie container ===== */
    .cookie-container{
      position:fixed;
      top:50%;
      left:50%;
      transform:translate(-50%,-50%);
      cursor:pointer;
      transition: transform .3s ease;
      z-index:5;
    }
    .cookie-container:hover{
      transform:translate(-50%,-50%) scale(1.04);
    }
    .cookie-container.clicked{
      cursor:default;
    }

    /* ===== Cookie SVG ===== */
    .cookie{
      width:370px;
      height:750px;
      filter: drop-shadow(0 12px 30px rgba(0,0,0,0.45));
    }

    .cookie-half{
      transition: transform 2.2s cubic-bezier(0.22, 1, 0.36, 1), opacity 1.2s ease;
    }

    /* ✅ Daha yavaş kırılma + görünür kalsın */
    .cookie-container.cracked .cookie-left{
      transform: translateX(-78px) rotate(-28deg);
      opacity: 1;
    }
    .cookie-container.cracked .cookie-right{
      transform: translateX(78px) rotate(28deg);
      opacity: 1;
    }

    /* ===== Fortune paper ===== */
    .fortune-paper{
      position:absolute;
      top:calc(50% + 170px);
      left:50%;
      transform:translate(-50%,-50%) scale(0.95);
      background: linear-gradient(to bottom, #FFF9E6 0%, #FFF5D6 100%);
      padding: 38px 46px;
      border-radius: 12px;
      box-shadow: 0 18px 42px rgba(0,0,0,0.22);
      opacity:0;
      transition: transform 1.2s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 1.0s ease;
      max-width: min(900px, 92vw);
      text-align:center;
      z-index:6;
    }
    .fortune-paper.visible{
      transform:translate(-50%,-50%) scale(1);
      opacity:1;
    }

    /* ✅ Yazı daha büyük */
    .fortune-text{
      font-size: 34px;
      color: #1f2f3f;
      font-style: italic;
      line-height: 1.55;
      text-shadow: 0 1px 2px rgba(0,0,0,0.10);
      font-weight: 520;
    }

    /* ===== Crumbs ===== */
    .crumb{
      position:absolute;
      border-radius: 50%;
      opacity:0;
      pointer-events:none;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
      z-index:4;
    }

    @keyframes crumb-fall{
      0%   { transform: translate(0,0) rotate(0deg) scale(1); opacity:0; }
      10%  { opacity:1; }
      100% { transform: translate(var(--tx), var(--ty)) rotate(720deg) scale(0.65); opacity:0; }
    }

    /* Responsive */
    @media (max-width: 768px){
      .cookie{ width:260px; height:210px; }
      .fortune-text{ font-size: 26px; }
      .fortune-paper{ padding: 28px 30px; top:74%; }
    }
    @media (max-width: 480px){
      .cookie{ width:220px; height:180px; }
      .fortune-text{ font-size: 22px; }
      .fortune-paper{ padding: 24px 26px; }
      .cookie-container{ top:43%; }
    }
  </style>
</head>

<body>
  <div class="container night-sky" id="background">

    <!-- Stars -->
    <div class="stars" id="stars"></div>

    <!-- Sunlight -->
    <div class="sunlight" id="sunlight"></div>

    <!-- Cookie -->
    <div class="cookie-container" id="cookieContainer" aria-label="fortune cookie">
      <svg class="cookie" viewBox="0 0 300 200" xmlns="http://www.w3.org/2000/svg">
        <!-- Left half -->
        <g class="cookie-half cookie-left">
          <path d="M150,95 L80,170 Q70,180 60,175 Q50,170 55,160 L120,75 Q130,60 140,65 Q148,70 150,95 Z"
                fill="#E8A855" stroke="#D4942D" stroke-width="3" stroke-linejoin="round"/>
          <path d="M145,90 Q130,100 120,120 Q110,140 105,160 L90,150 Q95,130 105,110 Q115,90 130,80 L145,90"
                fill="#D4942D" opacity="0.40"/>
          <path d="M150,95 L140,65 Q135,62 130,65 L125,75 Q135,75 145,85 L150,95"
                fill="#F5C77E" opacity="0.70"/>
          <circle cx="100" cy="110" r="2.5" fill="#B87A2F" opacity="0.6"/>
          <circle cx="115" cy="125" r="2" fill="#B87A2F" opacity="0.5"/>
          <circle cx="90" cy="140" r="2.5" fill="#B87A2F" opacity="0.6"/>
          <circle cx="105" cy="150" r="2" fill="#B87A2F" opacity="0.5"/>
          <circle cx="120" cy="95" r="2" fill="#B87A2F" opacity="0.5"/>
        </g>

        <!-- Right half -->
        <g class="cookie-half cookie-right">
          <path d="M150,95 L220,170 Q230,180 240,175 Q250,170 245,160 L180,75 Q170,60 160,65 Q152,70 150,95 Z"
                fill="#E8A855" stroke="#D4942D" stroke-width="3" stroke-linejoin="round"/>
          <path d="M155,90 Q170,100 180,120 Q190,140 195,160 L210,150 Q205,130 195,110 Q185,90 170,80 L155,90"
                fill="#D4942D" opacity="0.40"/>
          <path d="M150,95 L160,65 Q165,62 170,65 L175,75 Q165,75 155,85 L150,95"
                fill="#F5C77E" opacity="0.70"/>
          <circle cx="200" cy="110" r="2.5" fill="#B87A2F" opacity="0.6"/>
          <circle cx="185" cy="125" r="2" fill="#B87A2F" opacity="0.5"/>
          <circle cx="210" cy="140" r="2.5" fill="#B87A2F" opacity="0.6"/>
          <circle cx="195" cy="150" r="2" fill="#B87A2F" opacity="0.5"/>
          <circle cx="180" cy="95" r="2" fill="#B87A2F" opacity="0.5"/>
        </g>

        <!-- Paper hint -->
        <rect x="145" y="92" width="10" height="4" fill="#FFFEF7" opacity="0.95" rx="1"/>
        <rect x="142" y="88" width="16" height="2" fill="#FFFEF7" opacity="0.75" rx="1"/>
      </svg>
    </div>

    <!-- Fortune paper -->
    <div class="fortune-paper" id="fortunePaper">
      <p class="fortune-text" id="fortuneText">Your lucky break is closer than you think.</p>
    </div>

    <!-- ✅ Audio (senin dosya adların) -->
    <audio id="audioCrack" preload="auto" src="cookie-crack.mp3"></audio>
    <audio id="audioPaper" preload="auto" src="paper-rustle.mp3"></audio>
  </div>

  <script>
    // Stars
    const starsContainer = document.getElementById('stars');
    for(let i=0;i<90;i++){
      const star = document.createElement('div');
      star.className = 'star';
      const size = Math.random()*2 + 1;
      star.style.width = size+'px';
      star.style.height = size+'px';
      star.style.left = Math.random()*100+'%';
      star.style.top = Math.random()*100+'%';
      star.style.animationDelay = Math.random()*3+'s';
      starsContainer.appendChild(star);
    }

    // Sun rays
    const sunlightContainer = document.getElementById('sunlight');
    for(let i=0;i<12;i++){
      const ray = document.createElement('div');
      ray.className = 'sun-ray';
      const size = Math.random()*320 + 160;
      ray.style.width = size+'px';
      ray.style.height = size+'px';
      ray.style.left = Math.random()*100+'%';
      ray.style.top = Math.random()*100+'%';
      ray.style.animationDelay = Math.random()*5+'s';
      sunlightContainer.appendChild(ray);
    }

    // Clouds
    for(let i=0;i<5;i++){
      const cloud = document.createElement('div');
      cloud.className = 'cloud';
      cloud.style.width = (Math.random()*80+60)+'px';
      cloud.style.height = (Math.random()*30+25)+'px';
      cloud.style.left = Math.random()*100+'%';
      cloud.style.top  = (Math.random()*55+10)+'%';
      cloud.style.animationDelay = (Math.random()*10)+'s';
      cloud.style.animationDuration = (Math.random()*10+15)+'s';
      sunlightContainer.appendChild(cloud);
    }

    // Click logic
    const cookieContainer = document.getElementById('cookieContainer');
    const background = document.getElementById('background');
    const fortunePaper = document.getElementById('fortunePaper');
    const sunlight = document.getElementById('sunlight');

    const audioCrack = document.getElementById('audioCrack');
    const audioPaper = document.getElementById('audioPaper');

    function safePlay(a){
      try{
        a.currentTime = 0;
        const p = a.play();
        if(p && typeof p.catch === "function") p.catch(()=>{});
      }catch(e){}
    }

    cookieContainer.addEventListener('click', function(){
      if(this.classList.contains('clicked')) return;

      this.classList.add('clicked');
      this.classList.add('cracked');

      // ✅ Ses: crack hemen, paper biraz sonra
      safePlay(audioCrack);
      setTimeout(()=>safePlay(audioPaper), 650);

      // ✅ Kırıntılar: daha çok + daha büyük + daha uzun
      createCrumbs();

      // ✅ Arka plan geçişi (daha yavaş)
      setTimeout(()=>{
        background.classList.remove('night-sky');
        background.classList.add('day-sky');
        starsContainer.style.opacity = '0';
        sunlight.classList.add('visible');

        // clouds show
        const clouds = sunlightContainer.querySelectorAll('.cloud');
        clouds.forEach(c => c.style.opacity = '1');
      }, 520);

      // ✅ Yazı gecikmeli (hızlı gelmesin)
      setTimeout(()=>{
        fortunePaper.classList.add('visible');
      }, 1650);
    });

    function createCrumbs(){
      const crumbColors = ['#E8B968','#DDB56A','#D4A259','#C9A355','#B8944D'];
      const rect = cookieContainer.getBoundingClientRect();
      const originX = rect.left + rect.width/2;
      const originY = rect.top + rect.height/2 + 10;

      for(let i=0;i<55;i++){
        const crumb = document.createElement('div');
        crumb.className = 'crumb';

        const size = Math.random()*10 + 4;  // ✅ daha büyük
        crumb.style.width = size+'px';
        crumb.style.height = size+'px';

        crumb.style.left = originX+'px';
        crumb.style.top  = originY+'px';

        crumb.style.background = crumbColors[Math.floor(Math.random()*crumbColors.length)];

        const tx = (Math.random()-0.5)*520;
        const ty = Math.random()*420 + 220; // ✅ daha uzun düşüş
        crumb.style.setProperty('--tx', tx+'px');
        crumb.style.setProperty('--ty', ty+'px');

        const dur = Math.random()*1.1 + 2.2; // ✅ daha yavaş
        crumb.style.animation = `crumb-fall ${dur}s ease-out forwards`;
        crumb.style.animationDelay = (Math.random()*0.25)+'s';

        document.body.appendChild(crumb);
        setTimeout(()=>crumb.remove(), 4200);
      }
    }
  </script>
</body>
</html>
